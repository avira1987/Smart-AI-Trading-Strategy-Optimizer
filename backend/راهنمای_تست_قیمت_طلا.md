# ุฑุงูููุง ุชุณุช ุณุณุชู ุฏุฑุงูุช ููุช ูุญุธูโุง ุทูุง

ุงู ุณูุฏ ุฑุงูููุง ุฌุงูุน ุจุฑุง ุชุณุช ฺฉุฑุฏู ูุณูุช ุฏุฑุงูุช ููุช ูุญุธูโุง ุทูุง ุงุฑุงุฆู ูโุฏูุฏ.

## ๐ ููุฑุณุช ุชุณุชโูุง

### 1. ุชุณุช ุณุฑุน (`test_gold_price_quick.py`)
ุจุฑุง ุชุณุช ุณุฑุน ู ุนููุงุช ุฏุฑ ุญู ุชูุณุนู:

```bash
cd backend
python test_gold_price_quick.py
```

**ูฺฺฏโูุง:**
- โ ุชุณุช ุณุฑุน ู ุนููุงุช
- โ ููุงุด ูุชุงุฌ ุจุง ุฑูฺฏ (โ/โ)
- โ ููุงุด ุฒูุงู ูพุงุณุฎ ูุฑ provider
- โ ุชุณุช performance ุจุง ฺูุฏู ุฏุฑุฎูุงุณุช
- โ ููุงุณุจ ุจุฑุง debug ู ุชูุณุนู

### 2. ุชุณุช ุฌุงูุน (`test_gold_price_comprehensive.py`)
ุจุฑุง ุชุณุช ฺฉุงูู ุจุง mock ู unit testing:

```bash
cd backend
python test_gold_price_comprehensive.py
```

**ูฺฺฏโูุง:**
- โ Unit tests ุจุง mocking
- โ Integration tests
- โ API endpoint tests
- โ Error handling tests
- โ Performance tests
- โ ุจุฏูู ูุงุฒ ุจู ุงุชุตุงู ูุงูุน ุจู API ูุง

## ๐งช ุงููุงุน ุชุณุชโูุง

### Unit Tests

#### ุชุณุช FreeAPIProvider
- โ ุชุณุช ููููุช ExchangeRate-API
- โ ุชุณุช ุดฺฉุณุช ู timeout
- โ ุชุณุช MetalsAPI ุจุง ู ุจุฏูู API key
- โ ุชุณุช ููู API ูุง ุฑุงฺฏุงู

#### ุชุณุช MT5GoldPriceProvider
- โ ุชุณุช ููููุช ุฏุฑุงูุช ููุช
- โ ุชุณุช ุนุฏู initialization MT5
- โ ุชุณุช ูพุฏุง ูุดุฏู symbol
- โ ุชุณุช ุนุฏู ูุตุจ MetaTrader5

#### ุชุณุช GoldPriceManager
- โ ุชุณุช ุงูููุช MT5
- โ ุชุณุช fallback ุจู API ูุง ุฑุงฺฏุงู
- โ ุชุณุช fallback ุจู ฺูุฏู provider
- โ ุชุณุช ุดฺฉุณุช ููู providers
- โ ุชุณุช ุจุฑุฑุณ ุฏุณุชุฑุณ MT5
- โ ุชุณุช ูุฌูุฏ timestamp ุฏุฑ ูุชุฌู

#### ุชุณุช GoldPriceView (API)
- โ ุชุณุช ุจุง ุฏุณุชุฑุณ MT5
- โ ุชุณุช ุจุง ุงุดุชุฑุงฺฉ ูุนุงู
- โ ุชุณุช ุจุฏูู ุฏุณุชุฑุณ
- โ ุชุณุช ุฎุทุง ุฏุฑุงูุช ููุช

### Performance Tests
- โ ุชุณุช ุฒูุงู ูพุงุณุฎ (ุจุงุฏ < 1 ุซุงูู)
- โ ุชุณุช ุฏุฑุฎูุงุณุชโูุง ููุฒูุงู

## ๐ ูุชุงุฌ ุชุณุช

### ุชุณุช ูููู
```
โ ูููู - ููุช: 2050.25
   ููุจุน: mt5
   ุฒูุงู ูพุงุณุฎ: 0.123 ุซุงูู
```

### ุชุณุช ูุงูููู
```
โ ูุงูููู - ุฎุทุง: MT5 not available
   ุฒูุงู ูพุงุณุฎ: 0.045 ุซุงูู
```

## ๐ ุณูุงุฑููุง ุชุณุช

### 1. ุชุณุช ุจุง MT5 ูุนุงู
```python
# ุฏุฑ ุญุงู ฺฉู MT5 ูุตุจ ู ุงุฌุฑุง ุงุณุช
python test_gold_price_quick.py
```

### 2. ุชุณุช ุจุฏูู MT5 (ููุท API ูุง ุฑุงฺฏุงู)
```python
# ุจุฏูู MT5ุ ููุท API ูุง ุฑุงฺฏุงู ุชุณุช ูโุดููุฏ
python test_gold_price_quick.py
```

### 3. ุชุณุช ุจุง Mock (ุจุฏูู ุงุชุตุงู ูุงูุน)
```python
# ููู ฺุฒ mock ูโุดูุฏุ ูุงุฒ ุจู ุงุชุตุงู ูุณุช
python test_gold_price_comprehensive.py
```

## ๐ฏ ูพุดููุงุฏุงุช ุจุฑุง ุชุณุช ุจูุชุฑ

### 1. ุชุณุช ุฑูุฒุงูู (Daily Tests)
```bash
# ูุฑ ุฑูุฒ ฺฉุจุงุฑ ุงุฌุฑุง ฺฉูุฏ
python test_gold_price_quick.py
```

### 2. ุชุณุช ูุจู ุงุฒ Deploy
```bash
# ูุจู ุงุฒ deploy ุญุชูุงู ุงุฌุฑุง ฺฉูุฏ
python test_gold_price_comprehensive.py
```

### 3. ุชุณุช ุฏุฑ CI/CD
```yaml
# ุฏุฑ pipeline ุฎูุฏ ุงุถุงูู ฺฉูุฏ
- name: Test Gold Price System
  run: python backend/test_gold_price_comprehensive.py
```

## ๐ ฺฺฉโูุณุช ุชุณุช

### ูุจู ุงุฒ Deploy
- [ ] ููู unit tests ูููู ุจุงุดูุฏ
- [ ] ุฒูุงู ูพุงุณุฎ < 1 ุซุงูู ุจุงุดุฏ
- [ ] Fallback mechanism ฺฉุงุฑ ฺฉูุฏ
- [ ] Error handling ุฏุฑุณุช ุจุงุดุฏ
- [ ] API endpoint ุชุณุช ุดุฏู ุจุงุดุฏ

### ุชุณุช ุฏุณุช
- [ ] ุชุณุช ุจุง MT5 ูุนุงู
- [ ] ุชุณุช ุจุฏูู MT5 (ููุท API)
- [ ] ุชุณุช ุจุง ุงุดุชุฑุงฺฉ ูุนุงู
- [ ] ุชุณุช ุจุฏูู ุฏุณุชุฑุณ
- [ ] ุชุณุช ฺูุฏู ุฏุฑุฎูุงุณุช ูุชูุงู

## ๐ง ุชูุธูุงุช ุจุฑุง ุชุณุช

### Environment Variables
```bash
# ุจุฑุง ุชุณุช MetalsAPI
export METALS_API_KEY="your_key"

# ุจุฑุง ุชุณุช Fixer.io
export FIXER_API_KEY="your_key"

# ุจุฑุง ุชุณุช OpenExchangeRates
export OPENEXCHANGERATES_API_KEY="your_key"
```

### Mock ฺฉุฑุฏู Providers
ุฏุฑ `test_gold_price_comprehensive.py` ูโุชูุงูุฏ providers ุฑุง mock ฺฉูุฏ:

```python
@patch.object(MT5GoldPriceProvider, 'get_price')
def test_something(mock_mt5):
    mock_mt5.return_value = ({'last': 2050.0}, None)
    # ุชุณุช ุดูุง...
```

## ๐ Debug ฺฉุฑุฏู

### ุงฺฏุฑ ุชุณุชโูุง fail ูโุดููุฏ:

1. **ุจุฑุฑุณ ูุงฺฏโูุง:**
   ```python
   import logging
   logging.basicConfig(level=logging.DEBUG)
   ```

2. **ุชุณุช ุฏุณุช provider:**
   ```python
   from api.gold_price_providers import FreeAPIProvider
   price, error = FreeAPIProvider.get_from_exchangerate_api()
   print(f"Price: {price}, Error: {error}")
   ```

3. **ุจุฑุฑุณ ุงุชุตุงู ุจู API:**
   ```python
   import requests
   response = requests.get('https://api.exchangerate-api.com/v4/latest/XAU')
   print(response.status_code, response.json())
   ```

## ๐ ุจูุจูุฏ ุชุณุชโูุง

### ูพุดููุงุฏุงุช ุจุฑุง ุขูุฏู:

1. **ุชุณุช ุจุง pytest:**
   ```bash
   pip install pytest pytest-django
   pytest backend/test_gold_price_comprehensive.py -v
   ```

2. **ุชุณุช Coverage:**
   ```bash
   pip install coverage
   coverage run test_gold_price_comprehensive.py
   coverage report
   ```

3. **ุชุณุช Load Testing:**
   - ุชุณุช ุจุง 100+ ุฏุฑุฎูุงุณุช ููุฒูุงู
   - ุชุณุช rate limiting
   - ุชุณุช timeout handling

4. **ุชุณุช Integration:**
   - ุชุณุช ุจุง Django test client
   - ุชุณุช ุจุง authentication
   - ุชุณุช ุจุง database

## โ ูุซุงู ุงุฌุฑุง ูููู

```
======================================================================
ุชุณุช ุณุฑุน ุณุณุชู ุฏุฑุงูุช ููุช ูุญุธูโุง ุทูุง
======================================================================

============================================================
ุชุณุช ExchangeRate-API
============================================================
โ ูููู - ููุช: 2050.50
   ุฒูุงู ูพุงุณุฎ: 0.234 ุซุงูู

============================================================
ุชุณุช GoldPriceManager
============================================================

[TEST 1] ุจุฏูู ุงูููุช MT5 (fallback ุจู API ูุง ุฑุงฺฏุงู)
------------------------------------------------------------
โ ูููู
   ููุจุน: exchangerate_api
   ููุช: 2050.50
   ุฒูุงู ูพุงุณุฎ: 0.245 ุซุงูู

[TEST 2] ุจุง ุงูููุช MT5
------------------------------------------------------------
โ ูููู
   ููุจุน: mt5
   ููุช: 2050.25
   Bid: 2050.00
   Ask: 2050.50
   ุฒูุงู ูพุงุณุฎ: 0.123 ุซุงูู

======================================================================
โ ุชุณุช ุชูุงู ุดุฏ
======================================================================
```

## ๐ ูฺฉุงุช ููู

1. **ููุดู ุชุณุชโูุง ุฑุง ูุจู ุงุฒ commit ุงุฌุฑุง ฺฉูุฏ**
2. **ุงฺฏุฑ API ุฎุงุฑุฌ fail ูโฺฉูุฏุ ุชุณุชโูุง mock ุดุฏู ุฑุง ุงุฌุฑุง ฺฉูุฏ**
3. **ุจุฑุง ุชุณุช productionุ ุงุฒ environment variables ุงุณุชูุงุฏู ฺฉูุฏ**
4. **ุชุณุชโูุง performance ุฑุง ุจู ุตูุฑุช ููุธู ุงุฌุฑุง ฺฉูุฏ**

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ุฏุฑ ุชุณุชโูุง ุฏุงุฑุฏ:
1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ููู dependencies ูุตุจ ุดุฏูโุงูุฏ
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู environment variables ุฏุฑุณุช ุชูุธู ุดุฏูโุงูุฏ
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู Django settings ุฏุฑุณุช ุงุณุช
4. ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

